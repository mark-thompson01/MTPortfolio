<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Raspberry Pi 5 DNS Server Lab · Mark Thompson Portfolio</title>
  <meta name="description" content="A complete Raspberry Pi 5 DNS Server Lab demonstrating two DNS implementations: dnsmasq and BIND9. Includes configuration, testing, and verification screenshots." />
  <style>
    :root {
      --bg-1:#0f1115; --bg-2:#141821; --text:#E6E7EE; --muted:#A9ADBE;
      --brand:#4DA3FF; --card-border:#2A3447; --shadow:0 10px 30px rgba(0,0,0,.35);
      --radius:18px;
    }
    html, body {height:100%}
    body {
      margin:0; color:var(--text);
      font-family: system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,"Helvetica Neue",Arial,"Noto Sans";
      background:
        radial-gradient(1200px 800px at 30% -20%, #1a2233 0%, transparent 70%),
        radial-gradient(1200px 800px at 90% -10%, #0e1c2f 0%, transparent 70%),
        linear-gradient(180deg, var(--bg-1), var(--bg-2));
      line-height:1.6; -webkit-font-smoothing:antialiased; text-rendering:optimizeLegibility;
    }
    .wrap{max-width:1000px;margin:0 auto;padding:40px 20px 64px}
    .card{background:linear-gradient(180deg,rgba(255,255,255,.02),rgba(255,255,255,.01));border:1px solid var(--card-border);border-radius:var(--radius);box-shadow:var(--shadow);padding:18px;margin-top:16px}
    h1{font-size:clamp(28px,4vw,40px);font-weight:800;margin:8px 0 6px}
    h2{margin:0 0 10px;font-size:22px}
    .lead{color:var(--muted);margin:8px 0 14px;font-size:clamp(16px,2.2vw,18px)}
    .figure{border:1px solid var(--card-border);border-radius:12px;background:#0e1220;padding:8px;margin:12px auto;width:max-content;max-width:100%}
    .figure img{display:block;height:auto;max-width:100%}
    .zoomable{cursor:zoom-in}
    .zoom-overlay{position:fixed;inset:0;display:none;align-items:center;justify-content:center;background:rgba(0,0,0,.8);z-index:9999;padding:24px}
    .zoom-overlay.open{display:flex}
    .zoom-overlay img{max-width:min(1200px,94vw);max-height:90vh;border-radius:12px;box-shadow:var(--shadow);cursor:zoom-out}
    body.zoom-open{overflow:hidden}
  </style>
</head>
<body>
  <div class="wrap">
    <h1>Raspberry Pi 5 DNS Server Lab</h1>
    <p class="lead">The <strong>Domain Name System (DNS)</strong> is a core part of how networks operate. It translates 
human-readable domain names into logical IP addresses (and vice versa). Allowing 
computers and devices to locate and communicate with one another across a network or 
the internet.</p> 
    <p class="lead">This lab demonstrates how to configure a Raspberry Pi 5 as a DNS server using both <strong>dnsmasq</strong> and <strong>BIND9</strong>. Each implementation is documented step-by-step, including setup, configuration, and validation.</p>

    <!-- PART 1 -->
    <section class="card">
      <h2>Part 1: Configuring dnsmasq</h2>
      <p>dnsmasq is a lightweight DNS forwarder and DHCP server suitable for small environments. It’s efficient, simple to configure, and ideal for local caching.</p>
      
      <!-- rpdns1 - rpdns19 -->
      <p><strong>1.</strong> Begin with updating software packages on Raspberry Pi with apt package manager.</p>
      <div class="figure"><img src="Images/rpdns1.png" alt="Installing dnsmasq"></div>
      <p><strong>2.</strong> Install the <strong>DNSMasq</strong> DNS software on the Raspberry Pi with apt package manager.</p>
      <div class="figure"><img src="Images/rpdns2.png" alt="Editing dnsmasq config"></div>
      <p><strong>3.</strong> Configure <strong>DNSMasq:</strong></p>
      <div class="figure"><img src="Images/rpdns3.png" alt="Configuring no-resolv"></div>
      <p>Here in the <strong>nano</strong> text editor, use <strong>CTRL + W</strong> to search and locate the following lines by removing the hash sign (#).</p>
      <div class="figure"><img src="Images/rpdns4.png" alt="Adding Cloudflare DNS"></div>
      <p><strong>#domain-needed</strong></p>
      <div class="figure"><img src="Images/rpdns5.png" alt="Setting cache size"></div>
      <div class="figure"><img src="Images/rpdns6.png" alt="Saving configuration"></div>
      <div class="figure"><img src="Images/rpdns7.png" alt="Restarting dnsmasq service"></div>
      <p><strong>#bogus-priv</strong></p>
      <div class="figure"><img src="Images/rpdns8.png" alt="Testing from Windows client"></div>
      <div class="figure"><img src="Images/rpdns9.png" alt="Testing DNS resolution"></div>
      <div class="figure"><img src="Images/rpdns10.png" alt="Verifying configuration"></div>
      <p><strong>#no-resolve</strong></p>
      <div class="figure"><img src="Images/rpdns11.png" alt="Verifying DNS query results"></div>
      <div class="figure"><img src="Images/rpdns12.png" alt="Verifying dnsmasq logs"></div>
      <p><strong>#server=/local/192.168.0.1</strong></p>
      <div class="figure"><img src="Images/rpdns13.png" alt="Checking DNS configuration file"></div>
      <div class="figure"><img src="Images/rpdns14.png" alt="Testing network connectivity"></div>
      <p><strong>#cache-size=150</strong></p>
      <div class="figure"><img src="Images/rpdns15.png" alt="Reviewing DNS cache entries"></div>
      <div class="figure"><img src="Images/rpdns16.png" alt="DNS query validation"></div>
      <p><strong>4.</strong> Restart the <strong>dnsmasq</strong> service and verify the status.</p>
      <div class="figure"><img src="Images/rpdns17.png" alt="Testing local domain"></div>
      <p><strong>5.</strong> Configure Windows 11 Lab-Client with Raspberry Pi IP address as Preferred DNS Server.</p>
      <div class="figure"><img src="Images/rpdns18.png" alt="Restarting network services"></div>
      <p><strong>6.</strong> Run <strong>nslookup</strong> command to test out DNS server functionality with <strong>DNSMasq</strong> running on the Raspberry Pi.</strong></p>
      <div class="figure"><img src="Images/rpdns19.png" alt="Final dnsmasq verification"></div>
      
      <p>After configuration, the Raspberry Pi successfully caches DNS queries and forwards requests to Cloudflare’s 1.1.1.1 and 1.0.0.1 servers.</p>
    </section>

    <!-- PART 2 -->
    <section class="card">
      <h2>Part 2: Configuring BIND9</h2>
      <p><strong>BIND9</strong> is a robust DNS server supporting authoritative and recursive resolution. This setup transforms the Raspberry Pi 5 into a local DNS authority for <code>home.lan</code> while forwarding external lookups to Cloudflare.</p>

      <h3>Static IP Configuration</h3>
      <p>To begin, the Raspberry Pi needs to be configured with a <strong>Static IP</strong> address.
      In order to do that, we need to systematically identify how networking is managed on the given Raspberry
      Pi OS.</p>
      <p>Setting this up will ensure the Raspberry Pi retains the same IP address after rebooting, enabling reliable DNS, SSH, and other network services. </p>

      <!-- Static IP and environment setup -->
      <p><strong>1. Identify the OS Version</strong></p>
      <p>Learn which networking framework the OS uses.</p>
      <p>Here we see the OS Version Raspberry Pi OS Bookworm. This OS Version uses <strong>NetworkManager</strong> as the networking framework.</p>
      <div class="figure"><img src="Images/checkOSVersion.png" alt="Check OS version"></div>

      <p><strong>2. Verify Which Network Service Is Active</strong></p>
      <p>Confirm that <strong>NetworkManager</strong> is indeed running and controlling interfaces.</p>
      <p>If it wasn't active, the configuration file <strong>/etc/dhcpcd.conf</strong> would be modified instead.</p>
      <p>This prevents misconfigurations caused by editing the wrong files.</p>
      <div class="figure"><img src="Images/2IdentifyService.png" alt="Identify service"></div>
      
      <p><strong>3. List Active Network Connections</strong></p>
      <p>Discover the connection profile (e.g., "Wired Connection 1" or "WLAN connection 1").</p>
      <p>You must know this name before modifying or applying static IP settings.</p>
      <div class="figure"><img src="Images/3nmcliconshow.png" alt="NetworkManager connections"></div>

      <p><strong>4. Check Current Network Interface and IP</strong></p>
      <p>To confirm which interface (e.g., eth0, wlan0) is active and what IP/subnet the Pi currently uses.</p>
      <p>This ensures your static IP stays in the same valid range and avoids conflicts.</p>
      <p>In this example, I'm only using the command hostname -I, in other caeses running ip a would be necessary.</p>
      <div class="figure"><img src="Images/4hostname.png" alt="Check hostname"></div>

      <p><strong>5. Inspect Connection Settings</strong></p>
      <p>Verify whether the current IPv4 method is <strong>auto</strong> (DHCP).</p>
      <p>You need to switch it to <strong>manual</strong> before applying a static address.</p>
      <p>This step validates your assumptions before changing configuration.</p>
      <div class="figure"><img src="Images/5InspectSettings.png" alt="Inspect network settings"></div>

      <p><strong>6. Apply Static IP Configuration</strong></p>
      <p>To explicitly define:</p>
      <ul>
        <li>The Pi's static IP (IPv4.addresses)</li>
        <li>Its gateway (IPv4.gateway)</li>
        <li>Its DNS servers (ipv4.dns)</li>
        <li>And the connection method (ipv4.method manual)</li>
      </ul>
      <p>This makes the Pi use a fixed IP address that won't change after reboots - critical for consistent DNS, SSH, or web service operations.</p>
      <div class="figure"><img src="Images/6ApplyStatic.png" alt="Apply static IP"></div>

      <p><strong>7. Verify Connectivity and Persistence</strong></p>
      <p>Confirm that the Pi is reachable at its new static IP and still has internet access through the gateway.</p>
      <p>This validation ensures that the configuration was applied correctly and is functioning as expected.</p>
      <div class="figure"><img src="Images/7verify1.png" alt="Verify IP config 1"></div>
      <div class="figure"><img src="Images/7verify2.png" alt="Verify IP config 2"></div>
      <div class="figure"><img src="Images/7verify3.png" alt="Verify IP config 3"></div>
      <div class="figure"><img src="Images/7verify4.png" alt="Verify IP config 4"></div><br><br>

      <!-- Installing and configuring BIND9 -->
      <div class="figure"><img src="Images/Part2-1.png" alt="Installing BIND9"></div>
      <div class="figure"><img src="Images/Part2-2.png" alt="Opening named.conf.local"></div>
      <div class="figure"><img src="Images/Part2-3.png" alt="Zone configuration"></div>
      <div class="figure"><img src="Images/Part2-4.png" alt="Creating db.home.lan"></div>
      <div class="figure"><img src="Images/Part2-5.png" alt="Editing reverse zone"></div>
      <div class="figure"><img src="Images/Part2-6.png" alt="PTR records"></div>
      <div class="figure"><img src="Images/Part2-7.png" alt="Configuring named.conf.options"></div>
      <div class="figure"><img src="Images/Part2-8.png" alt="Adding forwarders"></div>
      <div class="figure"><img src="Images/Part2-9.png" alt="Restart BIND9 service"></div>
      <div class="figure"><img src="Images/Part2-10.png" alt="Verify forwarders configuration"></div>
      <div class="figure"><img src="Images/Part2-11.png" alt="BIND9 status"></div>
      <div class="figure"><img src="Images/Part2-12.png" alt="Testing with dig"></div>

      <p>The BIND9 configuration includes both forward and reverse zone definitions, along with Cloudflare’s DNS for external resolution. Successful testing with <code>dig</code> confirms the DNS server’s proper function.</p>
    </section>

    <!-- PART 3 -->
    <section class="card">
      <h2>Part 3: Results and Key Takeaways</h2>
      <p>Both DNS implementations demonstrate how the Raspberry Pi 5 can serve as a powerful and flexible DNS solution for lab or production networks.</p>
      <ul>
        <li><strong>dnsmasq:</strong> Simple and efficient DNS forwarder with minimal setup.</li>
        <li><strong>BIND9:</strong> Full-featured DNS server supporting zones, reverse lookups, and recursive queries.</li>
      </ul>
      <p>This project demonstrates local name resolution, forward and reverse zone management, and verification using <code>dig</code> and <code>systemctl</code>. The lab also reinforces the importance of DNS in network infrastructure and the versatility of the Raspberry Pi 5.</p>
    </section>

    <section class="card">
      <p><a href="../index.html">Back to Home</a></p>
    </section>

    <footer>
      <div>Mark Thompson · MTPortfolio</div>
      <div class="links">
        <a href="https://www.linkedin.com/in/mark-thompson-9361a81a9/" target="_blank">LinkedIn</a> ·
        <a href="https://github.com/mark-thompson-01" target="_blank">GitHub</a>
      </div>
    </footer>
  </div>

  <script>
    (function(){
      const imgs=document.querySelectorAll('.wrap img');
      if(!imgs.length)return;
      const overlay=document.createElement('div');
      overlay.className='zoom-overlay';
      overlay.setAttribute('aria-hidden','true');
      overlay.innerHTML='<img alt="">';
      document.body.appendChild(overlay);
      const ovImg=overlay.querySelector('img');
      function closeZoom(){overlay.classList.remove('open');document.body.classList.remove('zoom-open');ovImg.removeAttribute('src');}
      overlay.addEventListener('click',closeZoom);
      document.addEventListener('keydown',e=>{if(e.key==='Escape')closeZoom()});
      imgs.forEach(img=>{img.classList.add('zoomable');img.addEventListener('click',()=>{ovImg.src=img.currentSrc||img.src;overlay.classList.add('open');document.body.classList.add('zoom-open');},{passive:true});});
    })();
  </script>
</body>
</html>
