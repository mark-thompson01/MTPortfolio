<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Network Command Automation</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #1e1e1e;
      color: #e0e0e0;
      padding: 2rem;
    }
    h1, h2 {
      color: #00ffcc;
    }
    code {
      background-color: #333;
      padding: 0.2rem 0.4rem;
      border-radius: 4px;
      display: inline-block;
    }
    section {
      margin-bottom: 2rem;
    }
    ul {
      margin-top: 0.5rem;
      padding-left: 1.5rem;
    }
    p {
      line-height: 1.6;
    }
    img {
         display: block;
         margin: 20px 0;
         max-width: 75%;
         height: auto;
         border: 1px solid #444;
         border-radius: 5px;
    }
  </style>
</head>
<body>
<h1>Backup to NAS Server</h1>
<p>In this lab, I'm setting up an automated backup script to backup the Automation directory from the Raspberry Pi 5 to a Raspberry Pi 3 setup as a NAS server. For this to be successful, ssh and directory permissions will need to be explicity configured to the automated backups. After that is in place, the script will be setup to run once per week.</p><br>

<p><strong>1.</strong> The first step is to generate an ssh public/private key pair.</p>
<img src="Images/sshsetup0.png" alt="sshsetup0.png"><br>
<p><strong>2.</strong> After the public/private key pair is generated, it can then be copied to the NAS server.</p>
<img src="Images/sshsetup2.png" alt="sshsetup2.png"><br>
<p><strong>3.</strong> After the ssh key file is copied over to the NAS server, it should automatically login upon initiating an ssh session..</p>
<img src="Images/sshsetup3.png" alt="sshsetup3.png"><br>
<p><strong>4.</strong> To further confirm, run <strong>whoami</strong>. And, we're in!</p>
<img src="Images/sshsetup4.png" alt="sshsetup4.png"><br>
<p><strong>5.</strong> Here, I'm going to give the pi user account that is referenced in the script access to the /mnt/nasdrive NAS server directory for the script to run without error.</p>
<img src="Images/chown.png" alt="chown.png"><br>
    
<p><strong>6.</strong> From here, I'll launch <strong>nano</strong> to start creating the script.</p>
<p>Starting with the specified variables to ensuring that user account is checked for having write permissions to the directory.</p>
<p>The script then runs rsync with the first four variables and then redirects the results in the log file variable.</p>
<p>The script then finalizes with the print status in a conditional statement based on the backup being successful or failing.</p>
<img src="Images/Backupcode.png" alt="Backupcode.png"><br>

<p><strong>7.</strong> Now that the script is written and saved, set the file to be executable.</p>
<img src="Images/chmod.png" alt="chmod.png"><br>

<p><strong>8.</strong> Script is ready to run.</p>
<img src="Images/scriptrun.png" alt="scriptrun.png"><br>

<p><strong>9.</strong> On the Raspberry Pi 3 NAS server, the backup shows successful.</p> 
<img src="Images/scriptresult.png" alt="scriptresult.png"><br>

<p><strong>10.</strong> The script is all ready to go. From here I'm going to set to run once per week as a cronjob.</p>
<img src="Images/crontab.png" alt="crontab.png">
<img src="Images/cronjob2.png" alt="cronjob2.png"><br>
  










<a href="../index.html">Back to Home</a>
</body>
</html>
