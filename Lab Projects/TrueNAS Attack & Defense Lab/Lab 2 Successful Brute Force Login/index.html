<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Lab Projects</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 20px;
      line-height: 1.6;
      background-color: #2b2b2b; /* Dark background */
      color: #f0f0f0; /* Light grey text */
    }
    h1 {
      text-align: left;
      color: #d3d3d3; /* Lighter grey heading */
      margin-bottom: 10px;
    }
    h2 {
      text-align: left;
      color: #d3d3d3;
    }
    p {
      text-align: left;
    }
    ul {
      list-style: none; /* Remove default bullets */
      padding-left: 0;
      text-align: left; /* Align list to the left */
    }
    li {
      margin: 10px 0;
    }
    a {
      color: #1e90ff; /* Blue link color */
      text-decoration: none;
      font-weight: bold;
    }
    a:hover {
      color: #ff7f50; /* Coral hover color */
      text-decoration: underline;
    }
    .back-link {
      color: #1E90FF;
      text-decoration: none;
    }
  </style>
</head>
<body>
  <h1>NAS Security Attack & Defense Lab 2</h1>
  <h2>Successful Brute Force Login | Detection & Mitigation</h2>
  <p>Gaining access to the target server via successful brute force attack through the use of the SSH service.</p>
  <p>We know from the port scan in the previous lab that port 22 on the NAS server is open and running SSH. In this scenario, the NAS server is configured with a user account that has a weak password. Using the Metasploit auxiliary module <code>auxiliary/scanner/ssh_login</code>, a successful brute force attack is performed, leading to the compromise of the NAS server on the offensive side.</p>
  <p>On the defensive side, the logs are reviewed to identify the successful brute force login to the server via the SSH protocol, and further mitigation procedures are implemented.</p>

  <h3>Offensive</h3>
  <img src="Images/msf1.png" alt="msf1">
  <img src="Images/ssh_login.png" alt="ssh_login">
  <img src="Images/BruteForceSuccess.png" alt="BruteForceSuccess">
  <p>Here, access has been gained with a bsd shell. I'm going to upgrade this to a Meterpreter session with the use of post exploit module <code>post/multi/manage/shell_to_meterpreter</code></p>
  <img src="Images/Meterpreter%20Session%20Upgrade.png" alt="Meterpreter Session Upgrade">
  <img src="Images/In%20The%20System.png" alt="In The System">
  <img src="Images/getuid%20sysinfo.png" alt= getuid sysinfo">

  <h3>Defensive</h3>
  <p>In reviewing the authentication logs on the server, here we see recorded failed login attempts, and the successful login on the last line.</p>
  <img src="Images/LogSearch.png" alt=LogSearch">
  <img src="Images/LogSearch2.png" alt=LogSearch2">
  <p>Upon detecting this, I would immediately reset the password, disable the account from being logged into, and proceed with further incident investigation.</p>
  <img src="Images/ResetPassword.png" alt=ResetPassword">
  <img src="Images/Disable.png" alt=Disable">
  <p>While the investigation and other incident response procedures are underway, I would also configure the server to mitigate brute force attacks.</p>
  <p>For example, I would set the following configurations on the NAS server.</p>

  <p><strong>Disable Password-based Login for SSH</strong></p>
  <p>I would disable SSH password-based authentication on the server and set up SSH to only use public-key based authentication for the accounts that need to connect to SSH.</p>
  <img src="Images/Password%20Renable.png" alt="Password Renable">
  <img src="Images/SSH%20Server%20Settings%202.png" alt=SSH Server Settings 2">
  
<a href="../" class="back-link">Back to Lab Projects</a>
</body>
</html>
